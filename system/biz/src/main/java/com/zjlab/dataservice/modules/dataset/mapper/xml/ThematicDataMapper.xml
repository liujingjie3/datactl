<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjlab.dataservice.modules.dataset.mapper.ThematicDataMapper">

    <select id="qryThematicDataList" resultType="com.zjlab.dataservice.modules.dataset.model.po.ThematicDataPo">
        select *
        from thematic_data
        where del_flag = false
        <if test="request.dataSetId != null and request.dataSetId != ''">
            and ( data_id = #{request.dataSetId})
        </if>
        <if test="request.industry != null and request.industry != ''">
            and ( industry = #{request.industry})
        </if>
        <if test="request.query != null and request.query != ''">
            and ( name like CONCAT(CONCAT('%', #{request.query}), '%'))
        </if>
        <if test="request.createTimeStart != null and request.createTimeEnd != null">
            and create_time BETWEEN #{request.createTimeStart} AND #{request.createTimeEnd}
        </if>
        order by ${request.orderByField} ${request.orderByType}
    </select>
</mapper>